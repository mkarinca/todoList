{"mappings":"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","sources":["./js/view.js"],"sourcesContent":["/*global qs, qsa, $on, $parent, $delegate */\n\n(function (window) {\n\t'use strict';\n\n\t/**\n\t     * View that abstracts away the browser's DOM completely.\n\t     * It has two simple entry points:\n\t     *\n\t     *   - bind(eventName, handler)\n\t     *     Takes a todo application event and registers the handler\n\t     *   - render(command, parameterObject)\n\t     *     Renders the given command with the options\n\t     */\n\tfunction View(template) {\n\t\tthis.template = template;\n\n\t\tthis.ENTER_KEY = 13;\n\t\tthis.ESCAPE_KEY = 27;\n\n\t\tthis.$todoList = qs('.todo-list');\n\t\tthis.$todoItemCounter = qs('.todo-count');\n\t\tthis.$clearCompleted = qs('.clear-completed');\n\t\tthis.$main = qs('.main');\n\t\tthis.$footer = qs('.footer');\n\t\tthis.$toggleAll = qs('.toggle-all');\n\t\tthis.$newTodo = qs('.new-todo');\n\t}\n\n\tView.prototype._removeItem = function (id) {\n\t\tvar elem = qs('[data-id=\"' + id + '\"]');\n\n\t\tif (elem) {\n\t\t\tthis.$todoList.removeChild(elem);\n\t\t}\n\t};\n\n\tView.prototype._clearCompletedButton = function (completedCount, visible) {\n\t\tthis.$clearCompleted.innerHTML = this.template.clearCompletedButton(completedCount);\n\t\tthis.$clearCompleted.style.display = visible ? 'block' : 'none';\n\t};\n\n\tView.prototype._setFilter = function (currentPage) {\n\t\tqs('.filters .selected').className = '';\n\t\tqs('.filters [href=\"#/' + currentPage + '\"]').className = 'selected';\n\t};\n\n\tView.prototype._elementComplete = function (id, completed) {\n\t\tvar listItem = qs('[data-id=\"' + id + '\"]');\n\n\t\tif (!listItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tlistItem.className = completed ? 'completed' : '';\n\n\t\t// In case it was toggled from an event and not by clicking the checkbox\n\t\tqs('input', listItem).checked = completed;\n\t};\n\n\tView.prototype._editItem = function (id, title) {\n\t\tvar listItem = qs('[data-id=\"' + id + '\"]');\n\n\t\tif (!listItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tlistItem.className = listItem.className + ' editing';\n\n\t\tvar input = document.createElement('input');\n\t\tinput.className = 'edit';\n\n\t\tlistItem.appendChild(input);\n\t\tinput.focus();\n\t\tinput.value = title;\n\t};\n\n\tView.prototype._editItemDone = function (id, title) {\n\t\tvar listItem = qs('[data-id=\"' + id + '\"]');\n\n\t\tif (!listItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar input = qs('input.edit', listItem);\n\t\tlistItem.removeChild(input);\n\n\t\tlistItem.className = listItem.className.replace('editing', '');\n\n\t\tqsa('label', listItem).forEach(function (label) {\n\t\t\tlabel.textContent = title;\n\t\t});\n\t};\n\n\tView.prototype.render = function (viewCmd, parameter) {\n\t\tvar self = this;\n\t\tvar viewCommands = {\n\t\t\tshowEntries: function () {\n\t\t\t\tself.$todoList.innerHTML = self.template.show(parameter);\n\t\t\t},\n\t\t\tremoveItem: function () {\n\t\t\t\tself._removeItem(parameter);\n\t\t\t},\n\t\t\tupdateElementCount: function () {\n\t\t\t\tself.$todoItemCounter.innerHTML = self.template.itemCounter(parameter);\n\t\t\t},\n\t\t\tclearCompletedButton: function () {\n\t\t\t\tself._clearCompletedButton(parameter.completed, parameter.visible);\n\t\t\t},\n\t\t\tcontentBlockVisibility: function () {\n\t\t\t\tself.$main.style.display = self.$footer.style.display = parameter.visible ? 'block' : 'none';\n\t\t\t},\n\t\t\ttoggleAll: function () {\n\t\t\t\tself.$toggleAll.checked = parameter.checked;\n\t\t\t},\n\t\t\tsetFilter: function () {\n\t\t\t\tself._setFilter(parameter);\n\t\t\t},\n\t\t\tclearNewTodo: function () {\n\t\t\t\tself.$newTodo.value = '';\n\t\t\t},\n\t\t\telementComplete: function () {\n\t\t\t\tself._elementComplete(parameter.id, parameter.completed);\n\t\t\t},\n\t\t\teditItem: function () {\n\t\t\t\tself._editItem(parameter.id, parameter.title);\n\t\t\t},\n\t\t\teditItemDone: function () {\n\t\t\t\tself._editItemDone(parameter.id, parameter.title);\n\t\t\t}\n\t\t};\n\n\t\tviewCommands[viewCmd]();\n\t};\n\n\tView.prototype._itemId = function (element) {\n\t\tvar li = $parent(element, 'li');\n\t\treturn parseInt(li.dataset.id, 10);\n\t};\n\n\tView.prototype._bindItemEditDone = function (handler) {\n\t\tvar self = this;\n\t\t$delegate(self.$todoList, 'li .edit', 'blur', function () {\n\t\t\tif (!this.dataset.iscanceled) {\n\t\t\t\thandler({\n\t\t\t\t\tid: self._itemId(this),\n\t\t\t\t\ttitle: this.value\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t$delegate(self.$todoList, 'li .edit', 'keypress', function (event) {\n\t\t\tif (event.keyCode === self.ENTER_KEY) {\n\t\t\t\t// Remove the cursor from the input when you hit enter just like if it\n\t\t\t\t// were a real form\n\t\t\t\tthis.blur();\n\t\t\t}\n\t\t});\n\t};\n\n\tView.prototype._bindItemEditCancel = function (handler) {\n\t\tvar self = this;\n\t\t$delegate(self.$todoList, 'li .edit', 'keyup', function (event) {\n\t\t\tif (event.keyCode === self.ESCAPE_KEY) {\n\t\t\t\tthis.dataset.iscanceled = true;\n\t\t\t\tthis.blur();\n\n\t\t\t\thandler({id: self._itemId(this)});\n\t\t\t}\n\t\t});\n\t};\n\n\tView.prototype.bind = function (event, handler) {\n\t\tvar self = this;\n\t\tif (event === 'newTodo') {\n\t\t\t$on(self.$newTodo, 'change', function () {\n\t\t\t\thandler(self.$newTodo.value);\n\t\t\t});\n\n\t\t} else if (event === 'removeCompleted') {\n\t\t\t$on(self.$clearCompleted, 'click', function () {\n\t\t\t\thandler();\n\t\t\t});\n\n\t\t} else if (event === 'toggleAll') {\n\t\t\t$on(self.$toggleAll, 'click', function () {\n\t\t\t\thandler({completed: this.checked});\n\t\t\t});\n\n\t\t} else if (event === 'itemEdit') {\n\t\t\t$delegate(self.$todoList, 'li label', 'dblclick', function () {\n\t\t\t\thandler({id: self._itemId(this)});\n\t\t\t});\n\n\t\t} else if (event === 'itemRemove') {\n\t\t\t$delegate(self.$todoList, '.destroy', 'click', function () {\n\t\t\t\thandler({id: self._itemId(this)});\n\t\t\t});\n\n\t\t} else if (event === 'itemToggle') {\n\t\t\t$delegate(self.$todoList, '.toggle', 'click', function () {\n\t\t\t\thandler({\n\t\t\t\t\tid: self._itemId(this),\n\t\t\t\t\tcompleted: this.checked\n\t\t\t\t});\n\t\t\t});\n\n\t\t} else if (event === 'itemEditDone') {\n\t\t\tself._bindItemEditDone(handler);\n\n\t\t} else if (event === 'itemEditCancel') {\n\t\t\tself._bindItemEditCancel(handler);\n\t\t}\n\t};\n\n\t// Export to window\n\twindow.app = window.app || {};\n\twindow.app.View = View;\n}(window));\n"],"names":["window","View","template","this","ENTER_KEY","ESCAPE_KEY","$todoList","qs","$todoItemCounter","$clearCompleted","$main","$footer","$toggleAll","$newTodo","prototype","_removeItem","id","elem","removeChild","_clearCompletedButton","completedCount","visible","innerHTML","clearCompletedButton","style","display","_setFilter","currentPage","className","_elementComplete","completed","listItem","checked","_editItem","title","input","document","createElement","appendChild","focus","value","_editItemDone","replace","qsa","forEach","label","textContent","render","viewCmd","parameter","self","viewCommands","showEntries","show","removeItem","updateElementCount","itemCounter","contentBlockVisibility","toggleAll","setFilter","clearNewTodo","elementComplete","editItem","editItemDone","_itemId","element","li","$parent","parseInt","dataset","_bindItemEditDone","handler","$delegate","iscanceled","event","keyCode","blur","_bindItemEditCancel","bind","$on","app"],"version":3,"file":"index.1687f74c.js.map"}